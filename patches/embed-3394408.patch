diff --git a/src/Form/EmbedButtonForm.php b/src/Form/EmbedButtonForm.php
index 5379c90..416efeb 100644
--- a/src/Form/EmbedButtonForm.php
+++ b/src/Form/EmbedButtonForm.php
@@ -127,14 +127,29 @@ class EmbedButtonForm extends EntityForm {
 
     $config = $this->config('embed.settings');
     $upload_location = $config->get('file_scheme') . '://' . $config->get('upload_directory') . '/';
+
+    $has_ckeditor5 = $this->moduleHandler->moduleExists('ckeditor5');
+
+    $validate_extensions = $has_ckeditor5 ? 'svg' : 'gif png jpg jpeg svg';
+    // First parameter is maximum dimensions, second is minimum dimensions.
+    $validate_dimensions = $has_ckeditor5 ? [0, 0] :  ['32x32', '16x16'];
+
+    $validators = [];
+    if (version_compare(\Drupal::VERSION, '10.2', '<')) {
+      $validators['file_validate_extensions'] = [$validate_extensions];
+      $validators['file_validate_image_resolution'] = $validate_dimensions;
+    }
+    else {
+      $validators['FileExtension']['extensions'] = $validate_extensions;
+      $validators['FileImageDimensions']['maxDimensions'] = $validate_dimensions[0];
+      $validators['FileImageDimensions']['minDimensions'] = $validate_dimensions[1];
+    }
+
     $form['icon_file'] = [
       '#type' => 'managed_file',
       '#title' => $this->t('Button icon'),
       '#upload_location' => $upload_location,
-      '#upload_validators' => [
-        'file_validate_extensions' => ['gif png jpg jpeg svg'],
-        'file_validate_image_resolution' => ['32x32', '16x16'],
-      ],
+      '#upload_validators' => $validators,
     ];
 
     if (!$button->isNew()) {
@@ -155,7 +170,8 @@ class EmbedButtonForm extends EntityForm {
       ];
 
       // Show an even nicer preview with CKEditor being used.
-      if ($this->moduleHandler->moduleExists('ckeditor')) {
+      if ($this->moduleHandler->moduleExists('ckeditor') && !$has_ckeditor5) {
+        // Show an even nicer preview with CKEditor4 being used.
         $form['icon_preview']['image']['#prefix'] = '<div data-toolbar="active" role="form" class="ckeditor-toolbar ckeditor-toolbar-active clearfix"><ul class="ckeditor-active-toolbar-configuration" role="presentation" aria-label="CKEditor toolbar and button configuration."><li class="ckeditor-row" role="group" aria-labelledby="ckeditor-active-toolbar"><ul class="ckeditor-toolbar-groups clearfix js-sortable"><li class="ckeditor-toolbar-group" role="presentation" data-drupal-ckeditor-type="group" data-drupal-ckeditor-toolbar-group-name="Embed button icon preview" tabindex="0"><h3 class="ckeditor-toolbar-group-name" id="ckeditor-toolbar-group-aria-label-for-formatting">Embed button icon preview</h3><ul class="ckeditor-buttons ckeditor-toolbar-group-buttons js-sortable" role="toolbar" data-drupal-ckeditor-button-sorting="target" aria-labelledby="ckeditor-toolbar-group-aria-label-for-formatting"><li data-drupal-ckeditor-button-name="Bold" class="ckeditor-button"><a href="#" role="button" title="' . $button->label() . '" aria-label="' . $button->label() . '"><span class="cke_button_icon">';
         $form['icon_preview']['image']['#suffix'] = '</span></a></li></ul></li></ul></div>';
         $form['icon_preview']['#attached']['library'][] = 'ckeditor/drupal.ckeditor.admin';
